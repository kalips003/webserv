# server.conf

#######################
### GLOBAL SETTINGS ###

# path to directory for temp files / fd
tmp_root	tmp

#####################
### GLOBAL BLOCKS ###

# SERVER {	# DEFAULT IF NOT PRESENT

# 	listen					9999
# 	server_name				webserv.serv
# 	client_max_body_size	-1			# -1 for any size.

# 	location / {
# 		index				index.html 	# default file to find if asked a directory
# 		autoindex			off			# enable / disable directory listing
# 		post_policy 		reject		# post_policy = reject | replace | append
# 		allowed_methods		none		# GET POST PUT
# 		cgi_interpreter		none		#define a single cgi that can be used here
		
# 	} }

#####################
### CAT WEBSITE ###

server {

	listen			9999
	server_name		webcat.com
	root			www/webcat.com/website
	# root			/var/www/html;
	hello	hello
	client_max_body_size	-1	# -1 for any size.

	# DEFAULT ROOT
	location / {
		# index			.			# default file to find if asked a directory
		index			index.html
		# root			.			# root for this asked location path
		# autoindex		off			# enable / disable directory listing: on / off
		autoindex		off
		# post_policy 	reject		# POST upload if already exist: reject | replace | append
		post_policy 	reject
		# allowed_methods			# allowed: GET (+HEAD) | POST | PUT | DELETE | OPTIONS
		allowed_methods	GET
		# cgi_interpreter			# executable to use with anything here
		# client_max_body_size		# max body size in this location
		
	}

	location /img {
		root			img
	}
	# errors HTTP cats
	location /img/errors {
		root			img/errors
	}
	location /css {
		root			css
	}
	location /js {
		root			js
	}
	# donations
	location /donations {
		root			donations
		allowed_methods	GET POST PUT DELETE OPTIONS
		autoindex		on
		post_policy 	replace
	}
	location /donations/archives {
		root			donations/archives
		allowed_methods	
	}
	location /donations/hello {
		root			donations/hello
		allowed_methods	POST
		post_policy 	append
	}

	location /login {
		root			login
		cgi_interpreter /usr/bin/php-cgi;
		allowed_methods	GET POST
	}

}

#####################
server {

	listen					9998
	server_name				webnul
	root					www/webnul
	client_max_body_size	-1	# -1 for any size.

	# DEFAULT
	location / {
		index			index_webnul.html
		autoindex		on
		post_policy 	reject
		allowed_methods	GET POST DELETE PUT OPTIONS
	}

	location /imgs {
		root	imgs
	}

	location /options {
		root			options
		allowed_methods	OPTIONS
	}

	location /donations2 {
		root			donations2
		allowed_methods	GET POST DELETE PUT OPTIONS
		autonindex		on
		post_policy		replace
	}

	location /donations2/uploads {
		root			donations2/uploads
	}

	location /donations2/uploadsPut {
		root			donations2/uploadsPut
		allowed_methods	PUT OPTIONS
	}

	location /donations2/hellos {
		root			donations2/hellos
		allowed_methods	POST DELETE OPTIONS
		post_policy		append
	}

	location /donations2/no_options {
		allowed_methods	
	}

	location /js {
		root			js
	}

}

#####################
### GLOBAL BLOCKS ###

# "content-type" of known extensions
mime_types {
	html	text/html| charset=utf-8;
	css		text/css| charset=utf-8;
	js		application/javascript| charset=utf-8;
	png		image/png;
	jpg		image/jpeg;
	jpeg	image/jpeg;
	gif		image/gif;
	txt		text/plain;
	ico		image/x-icon;
	mp4		video/mp4;
	mp3		audio/mpeg;
}

# path for known binary extensions
cgi {
	.py  /usr/bin/python3;
	.php /usr/bin/php-cgi;
	.bla /home/agallon/Documents/web_test/cgi_tester;
}